defmodule Mix.Tasks.Auix.Gen.Stylesheet do
  @shortdoc "Generates CSS Stylesheet"

  @moduledoc """
  Finds registered themes along with configured theme name and generates the stylesheet css.
  """

  use Mix.Task

  alias Aurora.Uix.Templates.ThemeHelper

  @output_file "assets/css/auix-stylesheet.css"

  @doc """
  Runs the stylesheet generator.
  """
  @spec run(keyword()) :: any()
  def run(_options) do
    stylesheet = ThemeHelper.generate_stylesheet()

    File.write!(
      @output_file,
      "/* Generated by auix.gen.stylesheet. Do not edit. */\n#{stylesheet}"
    )

    IO.puts("\e[32mGenerated stylesheet in #{@output_file}\e[0m")
  end
end
